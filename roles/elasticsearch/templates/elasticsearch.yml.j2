# ======================== Core Elasticsearch Configuration ========================
cluster.name: {{ es_cluster_name }}
node.name: {{ es_node_name }}

path.data: {{ es_data_dir | default('/var/lib/elasticsearch') }}
path.logs: {{ es_log_dir | default('/var/log/elasticsearch') }}

network.host: {{ es_network_host }}
http.port: {{ es_http_port }}
transport.port: {{ es_transport_port }}

discovery.seed_hosts: [{% for host in es_seed_hosts %}"{{ host }}"{% if not loop.last %}, {% endif %}{% endfor %}]
cluster.initial_master_nodes: ["{{ es_initial_master_nodes[0] }}"]

# ======================== Node Roles Configuration ========================
node.roles:
{% for role in node_roles.split(',') %}
  - {{ role }}
{% endfor %}

# ======================== X-Pack Security Configuration ========================
xpack.security.enabled: false
xpack.security.authc.api_key.enabled: false
xpack.security.http.ssl.enabled: false

xpack.security.transport.ssl.enabled: true
xpack.security.transport.ssl.verification_mode: certificate
xpack.security.transport.ssl.client_authentication: required
xpack.security.transport.ssl.keystore.path: {{ cert_file }}
xpack.security.transport.ssl.truststore.path: {{ cert_file }}